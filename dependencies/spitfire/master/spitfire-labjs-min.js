/*
 <a href="http://en.wikipedia.org/wiki/MIT_License">MIT</a>.
 @copyright All rights reserved <a href="http://www.webitup.fr">copyright WebItUp</a>
 @name https://github.com/jsBoot/spitfire.js/blob/master/src/shimer.js#62-f14fa4a0754ddf2a106d57504b97442407cd7d48
 <a href="http://en.wikipedia.org/wiki/MIT_License">MIT</a>.
 @copyright All rights reserved <a href="http://www.webitup.fr">copyright WebItUp</a>
 @name https://github.com/jsBoot/spitfire.js/blob/master/src/loader.js#62-f14fa4a0754ddf2a106d57504b97442407cd7d48
*/
'use strict';(function(c){function a(a,d){var b=/^\w+\:\/\//;/^\/\/\/?/.test(a)?a=location.protocol+a:!b.test(a)&&a[0]!="/"&&(a=(d||"")+a);return b.test(a)?a:(a[0]=="/"?w:x)+a}function i(a,d){for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);return d}function j(a,d,b,h){a.onload=a.onreadystatechange=function(){if(!(a.readyState&&a.readyState!="complete"&&a.readyState!="loaded"||d[b]))a.onload=a.onreadystatechange=null,h()}}function q(a){a.ready=a.finished=true;for(var d=0;d<a.finished_listeners.length;d++)setTimeout(a.finished_listeners[d],
0);a.ready_listeners=[];a.finished_listeners=[]}function h(a,b,h,g,f){setTimeout(function(){var e,c=b.real_src,m;if("item"in l){if(!l[0]){setTimeout(arguments.callee,25);return}l=l[0]}e=document.createElement("script");if(b.type)e.type=b.type;if(b.charset)e.charset=b.charset;f?u?(a[k]&&o("start script preload: "+c),h.elem=e,y?(e.preload=true,e.onpreload=g):e.onreadystatechange=function(){e.readyState=="loaded"&&g();e.onreadystatechange=null},e.src=c):f&&c.indexOf(w)==0&&a[d]?(m=new XMLHttpRequest,
a[k]&&o("start script preload (xhr): "+c),m.onreadystatechange=function(){if(m.readyState==4)m.onreadystatechange=function(){},h.text=m.responseText+"\n//@ sourceURL="+c,g()},m.open("GET",c),m.send()):(a[k]&&o("start script preload (cache): "+c),e.type="text/cache-script",j(e,h,"ready",function(){l.removeChild(e);g()}),e.src=c,l.insertBefore(e,l.firstChild)):(z?(a[k]&&o("start script load (ordered async): "+c),e.async=false):a[k]&&o("start script load: "+c),j(e,h,"finished",g),e.src=c,l.insertBefore(e,
l.firstChild))},0)}function b(){function C(a,d,b){function h(){g!=null&&(q(b),g=null)}var g;if(!t[d.src].finished){if(!a[m])t[d.src].finished=true;g=b.elem||document.createElement("script");if(d.type)g.type=d.type;if(d.charset)g.charset=d.charset;j(g,b,"finished",h);b.elem?b.elem=null:b.text?(g.onload=g.onreadystatechange=null,g.text=b.text):g.src=d.real_src;l.insertBefore(g,l.firstChild);b.text&&h()}}function D(d,b,g,c){var f,e,k=function(){b.ready_cb(b,function(){C(d,b,f)})},i=function(){b.finished_cb(b,
g)};b.src=a(b.src,d[A]);b.real_src=b.src+(d[n]?(/\?.*$/.test(b.src)?"&_":"?_")+~~(Math.random()*1E9)+"=":"");t[b.src]||(t[b.src]={items:[],finished:false});e=t[b.src].items;d[m]||e.length==0?(f=e[e.length]={ready:false,finished:false,ready_listeners:[k],finished_listeners:[i]},h(d,b,f,c?function(){f.ready=true;for(var a=0;a<f.ready_listeners.length;a++)setTimeout(f.ready_listeners[a],0);f.ready_listeners=[]}:function(){q(f)},c)):(f=e[0],f.finished?setTimeout(i,0):f.finished_listeners.push(i))}function v(){function a(b,
c){f[k]&&o("script preload finished: "+b.real_src);b.ready=true;b.exec_trigger=c;d()}function b(a,c){f[k]&&o("script execution finished: "+a.real_src);a.ready=a.finished=true;a.exec_trigger=null;for(var g=0;g<c.scripts.length;g++)if(!c.scripts[g].finished)return;c.finished=true;d()}function d(){for(;e<c.length;){if(Object.prototype.toString.call(c[e])=="[object Function]"){f[k]&&o("$LAB.wait() executing: "+c[e]);try{c[e]()}catch(a){f[k]&&B("$LAB.wait() error caught: ",a)}}else if(!c[e].finished){for(var b=
c[e],g=false,h=0;h<b.scripts.length;h++)if(b.scripts[h].ready&&b.scripts[h].exec_trigger)g=true,b.scripts[h].exec_trigger(),b.scripts[h].exec_trigger=null;if(g)continue;break}e++}e==c.length&&(n=m=false)}var h,f=i(p,{}),c=[],e=0,m=false,n;h={script:function(){for(var d=0;d<arguments.length;d++){var e=arguments[d],k=arguments[d],j=void 0;Object.prototype.toString.call(e)=="[object Array]"||(k=[e]);for(var l=0;l<k.length;l++){if(!n||!n.scripts)c.push(n={scripts:[],finished:true});e=k[l];Object.prototype.toString.call(e)==
"[object Function]"&&(e=e());if(e)Object.prototype.toString.call(e)=="[object Array]"?(j=[].slice.call(e),j.push(l,1),k.splice.call(k,j),l--):(typeof e=="string"&&(e={src:e}),e=i(e,{ready:false,ready_cb:a,finished:false,finished_cb:b}),n.finished=false,n.scripts.push(e),D(f,e,n,s&&m),m=true,f[g]&&h.wait())}}return h},wait:function(){if(arguments.length>0){for(var a=0;a<arguments.length;a++)c.push(arguments[a]);n=c[c.length-1]}else n=false;d();return h}};return{script:h.script,wait:h.wait,setOptions:function(a){i(a,
f);return h}}}var p={},s=u||E,e=[],t={},r;p[d]=true;p[g]=false;p[m]=false;p[n]=false;p[k]=false;p[A]="";return r={setGlobalDefaults:function(a){i(a,p);return r},setOptions:function(){return v().setOptions.apply(null,arguments)},script:function(){return v().script.apply(null,arguments)},wait:function(){return v().wait.apply(null,arguments)},queueScript:function(){e[e.length]={type:"script",args:[].slice.call(arguments)};return r},queueWait:function(){e[e.length]={type:"wait",args:[].slice.call(arguments)};
return r},runQueue:function(){for(var a=r,b=e.length,d;--b>=0;)d=e.shift(),a=a[d.type].apply(null,d.args);return a},noConflict:function(){c.$LAB=f;return r},sandbox:function(){return b()}}}var f=c.$LAB,d="UseLocalXHR",g="AlwaysPreserveOrder",m="AllowDuplicates",n="CacheBust",k="Debug",A="BasePath",x=/^[^?#]*\//.exec(location.href)[0],w=/^\w+\:\/\/\/?[^\/]+/.exec(x)[0],l=document.head||document.getElementsByTagName("head"),F=c.opera&&Object.prototype.toString.call(c.opera)=="[object Opera]"||"MozAppearance"in
document.documentElement.style,o=function(){},B=o,s=document.createElement("script"),y=typeof s.preload=="boolean",u=y||s.readyState&&s.readyState=="uninitialized",z=!u&&s.async===true,E=!u&&!z&&!F;if(c.console&&c.console.log){if(!c.console.error)c.console.error=c.console.log;o=function(a){c.console.log(a)};B=function(a,b){c.console.error(a,b)}}c.$LAB=b();(function(a,b,d){if(document.readyState==null&&document[a])document.readyState="loading",document[a](b,d=function(){document.removeEventListener(b,
d,false);document.readyState="complete"},false)})("addEventListener","DOMContentLoaded")})(this);
(function(){var c;typeof head!="undefined"&&(c=function(){return function(a,b){a.push(b);return head.js.apply(head.js,a)}});typeof YUI!="undefined"&&(c=function(){var a;YUI().use("get",function(b){a=b});a.Get.options.async=true;return function(){a.Get.js.apply(a.Get,arguments)}});typeof yepnope!="undefined"&&(c=function(){return function(a,b){var c=a[a.length-1];yepnope({load:a,callback:function(a){c==a&&b()}})}});typeof requirejs!="undefined"&&(c=function(){return function(a,b){requirejs(a,b)}});
var a;typeof $LAB!="undefined"&&(a=function(){var a=$LAB.sandbox();this.script=function(b){a=a.script(b);return this};this.wait=function(b){a=b?a.wait(b):a.wait();return this}});a||(a=function(){var a=null,b=[],f=false,d=c(),g=function(){if(!f&&(f=b.shift()))if(f.uris.length)d(f.uris,function(a){var b=f.callback;f=false;b&&b(a);g()});else{var a=f.callback;f=false;a&&a();g()}};this.script=function(d){a&&clearTimeout(a);b.length||b.push({uris:[],callback:false});b[b.length-1].uris.push(d);a=setTimeout(g,
1);return this};this.wait=function(a){var d=b.length?b[b.length-1]:false;f&&(d=f);if(!d)return a&&a(),this;d.callback?b.push({uris:[],callback:a}):(d.callback=a,b.push({uris:[],callback:false}));return this}});a.prototype.fork=function(){return new a};a.prototype.base=function(a){for(var b=document.getElementsByTagName("script"),c,a=RegExp(a),d=0,g;d<b.length;g=b[d].getAttribute("src"),d++)if(g&&a.test(g)){c=g.split("/");c.pop();c=c.join("/")||"./";break}return c};var i=1,j=null;a.prototype.style=
function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("link");d.setAttribute("type","text/css");d.setAttribute("rel","stylesheet");d.setAttribute("data-spitfire-index",i);b&&d.setAttribute("media",b);d.setAttribute("href",a);if(!j)j=c.lastChild;!j||!j.nextSibling?c.appendChild(d):c.insertBefore(d,j.nextSibling);j=d;i++};var q=typeof define==="function"&&define.amd;if(q||typeof exports=="object"&&exports)q&&define("Spitfire/loader",new a);else{if(!("Spitfire"in this))this.Spitfire=
{};this.Spitfire.loader=new a}}).apply(this);
(function(){var c=typeof define==="function"&&define.amd,a=typeof exports=="object"&&exports;c||a?c&&define("Spitfire",a={}):a=this.Spitfire||(this.Spitfire={});var i={},j=[];a.add=function(a,b){b in i||(i[b]=[]);i[b].push(a)};a.use=function(a){if(!a||!(a in i))throw"INVALID_CATEGORY";for(var b=0;b<i[a].length;b++)j.push(i[a][b])};a.boot=function(a){for(var b=[],c=0,f;c<j.length&&(f=j[c]);c++)f.test&&(f.patch?f.patch():b.push("burnscars/"+f.uri+(a?".js":"-min.js")));return b};a.XHR="xhr";a.add({test:true,
uri:"xmlhttprequest"},a.XHR);a.JSON="json";a.add({test:true,uri:"json3"},a.JSON);a.UNSAFE="unsafe";a.add({test:!Function.isGenerator,uri:"function.isgenerator"},a.UNSAFE);a.add({test:!Object.preventExtensions||!Object.isSealed||!Object.isFrozen||!Object.seal||!Object.freeze,uri:"es5.shim.unsafe"},a.UNSAFE);a.SAFE="safe";var c=[].unshift("test")===void 0||[1,2].splice(0).length!=2||!Array.isArray||!Array.prototype.forEach||!Array.prototype.map||!Array.prototype.filter||!Array.prototype.every||!Array.prototype.some||
!Array.prototype.reduce||!Array.prototype.reduceRight||!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1||!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1,q=!Function.prototype.bind,h=!Object.keys,b=!Date.now||!Date.prototype.toISOString||!Date.parse||(new Date(-621987552E5)).toISOString().indexOf("-000001")===-1||function(){var a=false;try{a=Date.prototype.toJSON&&(new Date(NaN)).toJSON()===null&&(new Date(-621987552E5)).toJSON().indexOf("-000001")!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(b){}return!a}(),
f=!!"0".split(void 0,0).length||"".substr&&"0b".substr(-1)!=="b"||!String.prototype.trim||"\t\n\u000b\u000c\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff".trim(),c=c||q||h||b||f;a.add({test:Object.freeze&&function(){try{Object.freeze(function(){})}catch(a){return true}return false}(),patch:function(){Object.freeze=function(a){return function(b){return typeof b=="function"?b:a(b)}}(Object.freeze)}},a.SAFE);a.add({test:typeof TypeError==
"undefined",patch:function(){window.TypeError=Error||function(){}}},a.SAFE);a.add({test:!Object.getPrototypeOf,uri:"object.getprototypeof"},a.SAFE);a.add({test:!Object.getOwnPropertyDescriptor,uri:"object.getownpropertydescriptor"},a.SAFE);a.add({test:!Object.getOwnPropertyNames,uri:"object.getownpropertynames"},a.SAFE);a.add({test:!Object.create,uri:"object.create"},a.SAFE);a.add({test:!Object.defineProperty,uri:"object.defineproperty"},a.SAFE);a.add({test:!Object.defineProperties,uri:"object.defineproperties"},
a.SAFE);a.add({test:!Object.isExtensible,uri:"object.isextensible"},a.SAFE);a.add({test:!window.addEventListener,uri:"events"},a.SAFE);a.add({test:!window.localStorage,uri:"localstorage"},a.SAFE);a.add({test:!navigator.geolocation,uri:"geolocation"},a.SAFE);a.add({test:c,uri:"es5.shim"},a.SAFE);a.add({test:!window.JSON,uri:"json3"},a.SAFE);a.add({test:!window.XMLHttpRequest,uri:"xmlhttprequest"},a.SAFE);a.add({test:!window.console||eval("/*@cc_on @_jscript_version <= 9@*/")||!function(){for(var a=
true,b="log,debug,info,warn,error,assert".split(","),c=0;c<b.length;c++)a&=!!window.console[b[c]];return a}(),uri:"console"},a.SAFE);a.use(a.SAFE);a.add({test:!window.requestAnimationFrame||!window.cancelAnimationFrame,uri:"animationframe"},a.SAFE);a.add({test:!Array.from||!Array.of,uri:"es6.array"},a.SAFE);a.add({test:!Math.acosh||!Math.asinh||!Math.atanh||!Math.cosh||!Math.sinh||!Math.tanh||!Math.expm1,uri:"es6.math"},a.SAFE);a.add({test:!Number.isFinite||!Number.isInteger||!Number.isNaN||!Number.toInteger,
uri:"es6.number"},a.SAFE);a.add({test:!Object.getOwnPropertyDescriptors||!Object.getPropertyDescriptor||!Object.getPropertyNames||!Object.is||!Object.isnt,uri:"es6.object"},a.SAFE);a.add({test:!String.prototype.repeat||!String.prototype.startsWith||!String.prototype.endsWith||!String.prototype.contains,uri:"es6.string"},a.SAFE);setTimeout(function(a){if(!a){var b=window.setTimeout;window.setTimeout=function(a,c){var d=Array.prototype.slice.call(arguments);d.shift();d.shift();b(function(){a.apply(this,
d)},c)}}},1,true)}).apply(this);
